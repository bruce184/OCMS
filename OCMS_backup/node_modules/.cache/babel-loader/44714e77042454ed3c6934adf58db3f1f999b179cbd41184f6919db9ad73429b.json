{"ast":null,"code":"// UserModel - Quản lý logic nghiệp vụ cho User\n// Sync với database schema OCMS1\nexport class UserModel{// Lấy tất cả users\nstatic getAllUsers(){return this.users;}// Lấy user theo ID\nstatic getUserById(userId){return this.users.find(user=>user.userId===userId);}// Lấy user theo username\nstatic getUserByUsername(username){return this.users.find(user=>user.username===username);}// Lấy users theo role\nstatic getUsersByRole(role){return this.users.filter(user=>user.role===role);}// Thêm user mới\nstatic addUser(user){const newUser={...user,userId:`USER${Date.now()}`};this.users.push(newUser);return newUser;}// Cập nhật user\nstatic updateUser(userId,updates){const index=this.users.findIndex(user=>user.userId===userId);if(index!==-1){this.users[index]={...this.users[index],...updates};return this.users[index];}return null;}// Xóa user\nstatic deleteUser(userId){const index=this.users.findIndex(user=>user.userId===userId);if(index!==-1){this.users.splice(index,1);return true;}return false;}// Xác thực đăng nhập\nstatic authenticate(username,password){// Mock authentication - trong thực tế sẽ kiểm tra với database\nconst user=this.getUserByUsername(username);if(user&&password==='password123'){// Mock password\nreturn user;}return null;}// Kiểm tra quyền truy cập\nstatic hasPermission(userId,permission){const user=this.getUserById(userId);if(!user)return false;// Logic kiểm tra quyền theo role\nswitch(user.role){case'admin':return true;// Admin có tất cả quyền\ncase'lecturer':return['view_courses','manage_attendance','upload_materials','manage_assignments'].includes(permission);case'student':return['view_courses','view_attendance','download_materials','submit_assignments'].includes(permission);default:return false;}}// Lấy thông tin student\nstatic getStudent(studentId){const user=this.getUserById(studentId);if(user&&user.role==='student'){return{studentId,user};}return undefined;}// Lấy thông tin lecturer\nstatic getLecturer(lecturerId){const user=this.getUserById(lecturerId);if(user&&user.role==='lecturer'){return{lecturerId,user};}return undefined;}// Lấy thông tin admin\nstatic getAdmin(adminId){const user=this.getUserById(adminId);if(user&&user.role==='admin'){return{adminId,user};}return undefined;}}UserModel.users=[{userId:'STU001',username:'student1',fullName:'Alice Johnson',role:'student',email:'alice@student.ocms.edu',createdAt:'2024-01-01T00:00:00Z'},{userId:'LEC001',username:'dr.smith',fullName:'Dr. John Smith',role:'lecturer',email:'smith@ocms.edu',createdAt:'2024-01-01T00:00:00Z'},{userId:'ADMIN001',username:'admin',fullName:'System Administrator',role:'admin',email:'admin@ocms.edu',createdAt:'2024-01-01T00:00:00Z'}];","map":{"version":3,"names":["UserModel","getAllUsers","users","getUserById","userId","find","user","getUserByUsername","username","getUsersByRole","role","filter","addUser","newUser","Date","now","push","updateUser","updates","index","findIndex","deleteUser","splice","authenticate","password","hasPermission","permission","includes","getStudent","studentId","undefined","getLecturer","lecturerId","getAdmin","adminId","fullName","email","createdAt"],"sources":["D:/1. UMT/01. SUBJECTS/2. INTRO TO S.E/PROJECT/OCMS-FRONTEND-UI/src/models/UserModel.ts"],"sourcesContent":["import { User, Student, Lecturer, Admin } from './index';\r\n\r\n// UserModel - Quản lý logic nghiệp vụ cho User\r\n// Sync với database schema OCMS1\r\nexport class UserModel {\r\n  private static users: User[] = [\r\n    {\r\n      userId: 'STU001',\r\n      username: 'student1',\r\n      fullName: 'Alice Johnson',\r\n      role: 'student',\r\n      email: 'alice@student.ocms.edu',\r\n      createdAt: '2024-01-01T00:00:00Z'\r\n    },\r\n    {\r\n      userId: 'LEC001',\r\n      username: 'dr.smith',\r\n      fullName: 'Dr. John Smith',\r\n      role: 'lecturer',\r\n      email: 'smith@ocms.edu',\r\n      createdAt: '2024-01-01T00:00:00Z'\r\n    },\r\n    {\r\n      userId: 'ADMIN001',\r\n      username: 'admin',\r\n      fullName: 'System Administrator',\r\n      role: 'admin',\r\n      email: 'admin@ocms.edu',\r\n      createdAt: '2024-01-01T00:00:00Z'\r\n    }\r\n  ];\r\n\r\n  // Lấy tất cả users\r\n  static getAllUsers(): User[] {\r\n    return this.users;\r\n  }\r\n\r\n  // Lấy user theo ID\r\n  static getUserById(userId: string): User | undefined {\r\n    return this.users.find(user => user.userId === userId);\r\n  }\r\n\r\n  // Lấy user theo username\r\n  static getUserByUsername(username: string): User | undefined {\r\n    return this.users.find(user => user.username === username);\r\n  }\r\n\r\n  // Lấy users theo role\r\n  static getUsersByRole(role: 'student' | 'lecturer' | 'admin'): User[] {\r\n    return this.users.filter(user => user.role === role);\r\n  }\r\n\r\n  // Thêm user mới\r\n  static addUser(user: Omit<User, 'userId'>): User {\r\n    const newUser: User = {\r\n      ...user,\r\n      userId: `USER${Date.now()}`\r\n    };\r\n    this.users.push(newUser);\r\n    return newUser;\r\n  }\r\n\r\n  // Cập nhật user\r\n  static updateUser(userId: string, updates: Partial<User>): User | null {\r\n    const index = this.users.findIndex(user => user.userId === userId);\r\n    if (index !== -1) {\r\n      this.users[index] = { ...this.users[index], ...updates };\r\n      return this.users[index];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // Xóa user\r\n  static deleteUser(userId: string): boolean {\r\n    const index = this.users.findIndex(user => user.userId === userId);\r\n    if (index !== -1) {\r\n      this.users.splice(index, 1);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Xác thực đăng nhập\r\n  static authenticate(username: string, password: string): User | null {\r\n    // Mock authentication - trong thực tế sẽ kiểm tra với database\r\n    const user = this.getUserByUsername(username);\r\n    if (user && password === 'password123') { // Mock password\r\n      return user;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // Kiểm tra quyền truy cập\r\n  static hasPermission(userId: string, permission: string): boolean {\r\n    const user = this.getUserById(userId);\r\n    if (!user) return false;\r\n\r\n    // Logic kiểm tra quyền theo role\r\n    switch (user.role) {\r\n      case 'admin':\r\n        return true; // Admin có tất cả quyền\r\n      case 'lecturer':\r\n        return ['view_courses', 'manage_attendance', 'upload_materials', 'manage_assignments'].includes(permission);\r\n      case 'student':\r\n        return ['view_courses', 'view_attendance', 'download_materials', 'submit_assignments'].includes(permission);\r\n      default:\r\n        return false;\r\n    }\r\n  }\r\n\r\n  // Lấy thông tin student\r\n  static getStudent(studentId: string): Student | undefined {\r\n    const user = this.getUserById(studentId);\r\n    if (user && user.role === 'student') {\r\n      return { studentId, user };\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  // Lấy thông tin lecturer\r\n  static getLecturer(lecturerId: string): Lecturer | undefined {\r\n    const user = this.getUserById(lecturerId);\r\n    if (user && user.role === 'lecturer') {\r\n      return { lecturerId, user };\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  // Lấy thông tin admin\r\n  static getAdmin(adminId: string): Admin | undefined {\r\n    const user = this.getUserById(adminId);\r\n    if (user && user.role === 'admin') {\r\n      return { adminId, user };\r\n    }\r\n    return undefined;\r\n  }\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}